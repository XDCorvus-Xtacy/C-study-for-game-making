# 컴파일러 설정
CC = clang

# 현재 폴더 모든 C 파일 자동 감지
SRC = $(wildcard *.c)

# 기본 실행 파일 이름 (특정 파일 빌드 시 변경 가능)
OUT = program

# -----------------------------
# 1. 기본 빌드 (make)
# -----------------------------
all: $(OUT)

$(OUT): $(SRC)
	$(CC) $(SRC) -o $(OUT)

# -----------------------------
# 2. 전체 실행 (make run)
# -----------------------------
run: $(OUT)
	./$(OUT)

# -----------------------------
# 3. 특정 파일만 빌드 + 실행
# 사용법: make FILE=hello.c
# -----------------------------
single:
	@if [ -z "$(FILE)" ]; then \
		echo "ERROR: 파일 이름을 FILE=파일이름.c 형태로 지정하세요"; \
		exit 1; \
	fi
	$(CC) $(FILE) -o $(OUT) && ./$(OUT)

# -----------------------------
# 4. 실행 파일 삭제 (make clean)
# -----------------------------
clean:
	rm -f $(OUT)